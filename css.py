import re

def separar_css(html_file, css_file):
    with open(html_file, 'r', encoding='utf-8') as f:
        html_content = f.read()

    # Expressão regular para encontrar todas as tags <style>
    regex_style_tags = re.compile(r'<style.*?>(.*?)</style>', re.IGNORECASE | re.DOTALL)

    # Encontrar todos os blocos de CSS no HTML
    css_blocks = regex_style_tags.findall(html_content)

    # Extrair todo o CSS
    css_content = '\n'.join(css_blocks)

    # Escrever o CSS em um arquivo separado
    with open(css_file, 'w', encoding='utf-8') as f:
        f.write(css_content)

    # Remover os blocos de CSS do HTML
    html_content_sem_css = regex_style_tags.sub('', html_content)

    # Adicionar link para o arquivo CSS externo no HTML
    html_content_com_referencia_css = '<link rel="stylesheet" type="text/css" href="{}">\n'.format(css_file) + html_content_sem_css

    # Salvar o HTML modificado
    with open(html_file, 'w', encoding='utf-8') as f:
        f.write(html_content_com_referencia_css)

    print("CSS separado com sucesso e referenciado no arquivo HTML.")

# Nome do arquivo HTML de entrada
html_file = 'file.html'
# Nome do arquivo CSS de saída
css_file = 'style.css'

# Chamar a função para separar e referenciar o CSS no HTML
separar_css(html_file, css_file)

